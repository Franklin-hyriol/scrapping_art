require 'rubygems'
require 'nokogiri'
require 'open-uri'



def crypto_price
	my_hash = {"ETH"=>169.83, "XRP"=>0.231301, "BCH"=>368.9, "BSV"=>290.76, "USDT"=>1.0, "LTC"=>58.17, "EOS"=>3.88, "BNB"=>17.53, "XLM"=>0.059507, "ETC"=>10.17, "ADA"=>0.045118, "TRX"=>0.017137, "XMR"=>65.11, "DASH"=>118.31, "XTZ"=>1.51, "LINK"=>2.63, "LEO"=>0.902153, "ATOM"=>4.5, "NEO"=>11.02, "HT"=>3.18, "HEDG"=>2.57, "MIOTA"=>0.249642, "CRO"=>0.048067, "ZEC"=>56.56, "MKR"=>488.36, "USDC"=>1.02, "ONT"=>0.674549, "XEM"=>0.040322, "VET"=>0.005801, "BAT"=>0.216759, "DOGE"=>0.002364, "FTT"=>2.33, "BTG"=>12.18, "PAX"=>1.0, "DCR"=>18.41, "QTUM"=>1.98, "SNX"=>1.12, "REP"=>14.71, "ZRX"=>0.231069, "RVN"=>0.026441, "MOF"=>1.65, "TUSD"=>1.0, "ALGO"=>0.241872, "SXP"=>1.87, "OKB"=>2.94, "OMG"=>0.816697, "BCD"=>0.603033, "ZB"=>0.232957, "HOT"=>0.000654, "DAI"=>1.01, "ICX"=>0.190415, "LSK"=>0.790277, "CENNZ"=>0.087606, "NANO"=>0.686467, "THETA"=>0.103214, "WAVES"=>0.879883, "KCS"=>1.05, "BTM"=>0.085224, "ZEN"=>10.01, "CKB"=>0.006229, "DGB"=>0.006261, "MONA"=>1.19, "SEELE"=>0.109328, "BTT"=>0.000354, "MCO"=>4.72, "ENJ"=>0.087231, "KMD"=>0.580027, "HC"=>1.52, "IOST"=>0.005609, "SC"=>0.001541, "NEXO"=>0.112044, "VSYS"=>0.032508, "DGD"=>30.99, "DX"=>0.001192, "XVG"=>0.003676, "STEEM"=>0.161653, "BCN"=>0.000307, "ABBC"=>0.100418, "LUNA"=>0.185569, "BTS"=>0.018971, "KNC"=>0.290248, "ZIL"=>0.005102, "XZC"=>5.38, "AE"=>0.166002, "NRG"=>1.84, "MAID"=>0.102951, "RIF"=>0.082061, "QNT"=>3.75, "MATIC"=>0.016846, "ARDR"=>0.043001, "RLC"=>0.533082, "YAP"=>0.279854, "CRPT"=>0.415417, "ETN"=>0.004053, "SOLVE"=>0.112789, "DRG"=>0.105569, "SNT"=>0.010569, "MANA"=>0.034922, "GNT"=>0.036794, "EURS"=>1.11, "REN"=>0.042119, "ADK"=>1.38, "BEAM"=>0.623231, "ELF"=>0.061429, "GRIN"=>1.02, "STRAT"=>0.329988, "KICK"=>5.2e-05, "TOMO"=>0.45698, "NEX"=>0.871252, "NPXS"=>0.000133, "HPT"=>0.006132, "DGTX"=>0.036359, "GXC"=>0.438592, "ENG"=>0.37888, "AION"=>0.075739, "ELA"=>1.63, "SAI"=>1.01, "ETP"=>0.342971, "SLV"=>0.265202, "LEND"=>0.023469, "FET"=>0.039141, "CHZ"=>0.006826, "HBAR"=>0.012343, "TT"=>0.008763, "RCN"=>0.048913, "LRC"=>0.025953, "STX"=>0.096938, "BUSD"=>1.0, "WICC"=>0.124592, "NAS"=>0.429714, "ILC"=>0.056903, "WTC"=>0.386084, "PAI"=>0.014955, "WAXP"=>0.021366, "IOTX"=>0.004002, "TRUE"=>0.269839, "HYN"=>0.067588, "BST"=>0.816564, "TNT"=>0.048598, "IGNIS"=>0.02724, "BRD"=>0.233145, "WAN"=>0.191548, "GT"=>0.428134, "RDD"=>0.000698, "WIN"=>0.000102, "ANT"=>0.633501, "FUN"=>0.003004, "NULS"=>0.266475, "EKT"=>0.026778, "ARK"=>0.162624, "XMX"=>0.001056, "ONE"=>0.005168, "PPT"=>0.347315, "DIVI"=>0.012368, "LAMB"=>0.026324, "FTM"=>0.009743, "BHP"=>0.872261, "FCT"=>1.99, "POWR"=>0.041103, "GO"=>0.019596, "QASH"=>0.049774, "LOOM"=>0.017888, "CHSB"=>0.025181, "EDC"=>0.00636, "R"=>0.034491, "BNT"=>0.23719, "LOKI"=>0.357302, "YOU"=>0.036587, "DPT"=>9.2, "STORJ"=>0.114875, "PIVX"=>0.274299, "VTC"=>0.286981, "MDA"=>0.774302, "MX"=>0.072035, "MTL"=>0.244692, "CVC"=>0.021753, "GNO"=>12.93, "OCEAN"=>0.040244, "SAN"=>0.22341, "NEW"=>0.001167, "GRS"=>0.186614, "WXT"=>0.009213, "NMR"=>6.04, "RUNE"=>0.106515, "BLOCK"=>2.07, "KAN"=>0.002136, "ERD"=>0.00153, "PLBT"=>3.35, "DENT"=>0.000169, "ABT"=>0.132893, "ROX"=>0.042543, "ORBS"=>0.006398, "SYS"=>0.022042, "DMT"=>0.222969, "BIX"=>0.123273, "BOA"=>0.052415, "MEDX"=>0.003687, "LBTC"=>3.2, "LBA"=>0.019251}
	page = Nokogiri::HTML(open('https://coinmarketcap.com/all/views/all/'))
	price = Hash.new
	pr_sans_dollar = Array.new
	for i in 1..199
		nom = page.css('div table tbody').css('tr')[i].css('td')[2]
		pr = page.css('div table tbody').css('tr')[i].css('td')[4].css('a')
		pr_sans_dollar = (pr.text).gsub(/[$]/, '0')
	   	price[nom.text] = pr_sans_dollar.to_f
	end
	return price.class == Hash ? true : false
end

#puts crypto_price   #supp '#' pour voir le resultat :)